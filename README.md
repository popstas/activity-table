Интерфейс к таблице индикаторов и практик.


## Что умеют скрипты activity-table:
- Переводить все листы таблицы в единый лист "Вся активность"
- Записывать значение метрики в таблицу через командную строку
- Отправлять в InfluxDB данные метрик за всё время или только за текущий месяц. Пригодно для запуска через cron

[О таблице](https://blog.popstas.ru/blog/2021/01/17/new-year-2020/#таблица-индикаторов-и-практик)


У меня есть таблица активности, которую я веду c 2020 года, больше 5 лет. Каждый день я записываю 20+ метрик по своей жизни.

# Хранение данных
Первоисточник данных: google sheet из вложения, адрес https://docs.google.com/spreadsheets/d/1CzYHZFSM1rq4ejkmPKVgF9dSxfJWmmcsqE9_plD2KlA/edit?usp=sharing

Каждый месяц хранится в отдельном листе.
В листе "Вся активность" хранятся нормализованные данные на всю историю заполнения.
Пример:
```
Дата	Индикатор	Значение
2020-06-01	Зарядка	1
```
Есть скрипт, который создает json со всеми данными. Но он большой, 5 Мб. Я хочу сделать агента, локальную gpt-oss-120b или gpt-5.1 через api, у агента будет mcp интерфейс к данным активности.

---

# Данные
Все метрики имеют Теги: Утро, Здоровье, Сон, Самочувствие, Добавки, Привычки, Задачи, Время.

Все текущие метрики, на ноябрь 2025, в начале то, что заполняю утром, в конце то, что заполняется автоматически:
```
Проснулся свежим и бодрым
Проснулся вовремя
Записал сон
Помню сны
Пил витамины
Пил ноотропы
Пил магний
Пил мелатонин
Заснул быстрее 30 минут

Зарядка
Сделал задачу до проверки входящих
Сделал негорящую задачу
Делал задачи из основного рабочего списка
Делал задачи из домашнего списка
Бег/велик/лыжи
Не курил
Не отвлекался
Отвлечений
Затяжек
Стиков
Алкоголь
Не растрачивался
Не читал свежие новости (включая vk)
Не чатился дольше 10 минут
Доволен результатами дня

Встал с первым будильником
Лёг спать до полуночи
Подтягивания
Отжимания
Гантели
Медитация
Занимался английским
Пил кофе
Играл на гитаре
Играл на барабанах
Выходил из дома
Работал выше нормы
```


# Ввод данных
Часть метрик вносится в таблицу автоматизированно. Например, когда я прошу умный дом налить кофе, автоматически ставится 1 в строку "Пил кофе".
В листе "Детали активностей" хранятся подробности по метрикам: значения thresholds, обозначающих good, bad и warning.

Часть данных вносится в google sheet.
Обычно утром, когда я включаю компьютер, я вначале открываю таблицу активности и заполняю в нее, проснулся ли я бодрым и прочие первые строки. Я постарался расположить их в том порядке, в каком я их заполняю.

Сам факт заполнения часто выступают в роли напоминания. Например, утром, когда заполнил первые 4 колонки про то, как я поспал, я сразу вижу пятую колонку под названием Пил витамины. 

Есть голосовой интерфейс для добавления метрик через Алису. Например, я могу сказать "отметь: поднял гантели еще 25 раз". И в итоге в google sheet в ячейку текущего дня в ряде "Гантели" допишется +25. Любую метрику я могу добавить голосом.

У умного дома есть действие set-activity(metric, value), по сути любое устройство может отправить данные в таблицу активности.
Например, у меня есть кнопка возле кровати, если я нажимаю её через полчаса после того, как лёг спать, в таблицу автоматически записывается 0 в "Заснул быстрее 30 минут".
Утром в некоторые ячейки сразу отправляются нули, например, в "Гантели". И если ничего не делать, то в конце дня там будет 0. 

# Отображение данных
В таблице есть условное форматирование по цветам, и я сразу вижу красные и зеленые ячейки.

Все данные отправляются в InfluxDB и выводятся в виде графиков в Grafana.
На графиках видно скользящие средние за неделю и за месяц. Графики раскрашиваются по цветам из листа "Детали активностей".
